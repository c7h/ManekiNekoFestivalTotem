# Maneki neko festival totem

A festival totem is basically your crew's signature flag, banner, or crazy eye-catching object you hoist up high in the crowd at music festivals or big events. 
It's like your tribe's beacon in the sea of party people, making it easy for your squad to find each other in the midst of the chaotic crowd.

Imagine a gigantic inflatable pineapple, a neon-colored giraffe, or even a golden cat with laser eyes â€“ that's the totem! It's not just a way to stand out but also a rad way to rep your crew's vibe, spread good vibes, and create an epic meeting spot

![signal-2023-08-21-152957_004](https://github.com/c7h/ManekiNekoFestivalTotem/assets/2639206/efe3f8ea-bc4e-49bc-9f4f-533003f3f778)



## Financial advices & other spiritual marks
We wanted to give our cat a voice.. But why?

Cat are often portrayed in popular culture as mysterious or aloof creatures, so the idea of them having a voice and expressing opinions or witty remarks in a human-like manner can be entertaining. In other word: We thought it's funny.

![photo_2022-10-28_17-36-18](https://github.com/c7h/ManekiNekoFestivalTotem/assets/2639206/87ad4bf6-3d3b-46cb-9b54-1ab3db0b26ca)

For this we needed three things. A sound module, a speaker and an SD card. The speaker was taken from an old Bluetooth speaker. 
The second device is an _DFPlayer Mini_, which is a combination of an MP3 player module and a 3-watt Class D amplifier. 3 watt don't sound much, but is a decent _loudness_ for most many applications including ours.
The sound module should be placed in the old battey case of the cat. We don't need this battery compartment anymore and threw it out. It was replaced by a 3D printed replica of the battery case which is now housing the speaker from above.

Last, we needed some audio clips. They were generated by https://play.ht - a nice tool to generate character voice from text.

## The Arm

The modern Maneki Neko with an electromagnetic arm operates through an internal coil that, when energized by an electric current, 
creates a magnetic field. This magnetic field interacts with a magnet in the cat's arm, causing it to move. This does work vervy well for stationary cats, but stops working once you put it on a 2 meter long stick and waive it above a crowd of people.
We decided for the simplest possible solution: Throw out the old mechanics and replace it with a fast servo motor. The servo gives us the needed tourque and precise control of the motion.
![photo_2022-09-09_17-02-18](https://github.com/c7h/ManekiNekoFestivalTotem/assets/2639206/4f5be7d8-6e1f-401d-a19f-880dc3fec9fa)

Again, designing the servor motor holder and 3D printing it was a real time saver.

https://github.com/c7h/ManekiNekoFestivalTotem/assets/2639206/b4e735d6-965d-4e14-981f-f1db0888c5ce

Cats doing cat things....


## Finally: Lasers

Reason number one for adding a laser show is visibility. Reason number two is because it looks really cool as soon as fog is present.
We've added 9 low energy dot lasers as a "collar" and two low energy line laser, one for the eye, and one inside the paw. These line lasers are individually controlled. 
The _collar_ lasers on the other side can be controlled in groups of 3. Every third laser is connected in line. 
The reasons is that we ran out of GPIO pins on our Arduino nano and didn't wanted to invest (yet) in a port expander or a similar solution.


https://github.com/c7h/ManekiNekoFestivalTotem/assets/2639206/6f3496ec-4ce6-4b5d-b142-76a9ee3bc034


How should they blink? Ideally to the beat of the music. We experimented with different solutions here. Our first idea was to use a microphone, some FFT algo and peak measurement. We built a prototype board for this but quickly ran into problems with oversaturated microphone readings in loud environment. We abandoned this idea and evaluated a much simpler idea.
The simple approach is to "beat match" or _sync_ the beat with a button. Tap a button with a beat 4 times in a row and the lasers will sync with the beat (similar to how those fancy dj controllers most likely work - i have no idea tbh but this is how I imagine them to work).
The first three taps are measuring the time between two beats. The 4th is calculating the average over the measurements and starts the blinking sequence of the lasers. This worked really well and is simple to use.
